<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Runner - Simple HTML5 Game</title>
  <style>
    :root{--bg:#0b1220;--fg:#e6f0ff;--accent:#ffd166}
    html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--fg)}
    #gameWrap{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;padding:12px;box-sizing:border-box}
    canvas{background:linear-gradient(180deg,#081027 0%, #0b1220 100%);border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
    #ui{width:100%;max-width:900px;margin-top:12px;display:flex;justify-content:space-between;align-items:center}
    .btn{background:var(--accent);color:#06223a;padding:8px 12px;border-radius:8px;border:none;font-weight:700}
    #touchControls{display:flex;gap:8px}
    .touchBtn{width:64px;height:64px;border-radius:12px;background:rgba(255,209,102,.14);display:flex;align-items:center;justify-content:center;font-size:20px;user-select:none}
    #instructions{font-size:14px;opacity:.9}
    @media (max-width:480px){.touchBtn{width:56px;height:56px;font-size:18px}}
  </style>
</head>
<body>
  <div id="gameWrap">
    <canvas id="game" width="900" height="450"></canvas>
    <div id="ui">
      <div id="scores">
        <div id="score">Score: 0</div>
        <div id="high">High: 0</div>
      </div>
      <div id="touchControls">
        <div class="touchBtn" id="left">◀</div>
        <div class="touchBtn" id="jump">▲</div>
        <div class="touchBtn" id="right">▶</div>
      </div>
      <div>
        <button class="btn" id="restart">Restart</button>
      </div>
    </div>
    <div id="instructions">Controls: Arrow keys / A,D / Space to jump. On touch: use the buttons. Collect coins, avoid obstacles.</div>
  </div><script>
// Simple responsive endless runner. Single-file, no libs.
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  // Virtual resolution (we scale canvas to fit while keeping aspect ratio)
  const VW = 900, VH = 450;

  function fitCanvas() {
    const wrapW = Math.min(window.innerWidth - 24, 900);
    const scale = wrapW / VW;
    canvas.style.width = (VW * scale) + 'px';
    canvas.style.height = (VH * scale) + 'px';
  }
  window.addEventListener('resize', fitCanvas);
  fitCanvas();

  // Game state
  let last = 0, delta = 0, running = true;
  let score = 0;
  const scoreEl = document.getElementById('score');
  const highEl = document.getElementById('high');
  const restartBtn = document.getElementById('restart');
  const PLAYER = {x:120,y:0,w:48,h:48,vx:0,vy:0,onGround:false};
  const GRAV = 1400; // px/s^2
  const SPEED = 220; // world speed

  // World
  let obstacles = [];
  let coins = [];
  let spawnTimer = 0;
  let coinTimer = 0;
  let worldOffset = 0;

  // Controls
  const keys = {left:false,right:false,jump:false};
  function keyDown(e){
    if(['ArrowLeft','a','A'].includes(e.key)) keys.left = true;
    if(['ArrowRight','d','D'].includes(e.key)) keys.right = true;
    if(e.code === 'Space' || e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') keys.jump = true;
  }
  function keyUp(e){
    if(['ArrowLeft','a','A'].includes(e.key)) keys.left = false;
    if(['ArrowRight','d','D'].includes(e.key)) keys.right = false;
    if(e.code === 'Space' || e.key === 'w' || e.key === 'W' || e.key === 'ArrowUp') keys.jump = false;
  }
  window.addEventListener('keydown', keyDown);
  window.addEventListener('keyup', keyUp);

  // Touch buttons
  document.getElementById('left').addEventListener('touchstart', e=>{e.preventDefault(); keys.left=true});
  document.getElementById('left').addEventListener('touchend', e=>{e.preventDefault(); keys.left=false});
  document.getElementById('right').addEventListener('touchstart', e=>{e.preventDefault(); keys.right=true});
  document.getElementById('right').addEventListener('touchend', e=>{e.preventDefault(); keys.right=false});
  document.getElementById('jump').addEventListener('touchstart', e=>{e.preventDefault(); keys.jump=true; setTimeout(()=>keys.jump=false, 200)});

  restartBtn.addEventListener('click', resetGame);

  // Highscore from localStorage
  const HKEY = 'simple_runner_high';
  let high = parseInt(localStorage.getItem(HKEY) || '0',10);
  highEl.textContent = 'High: ' + high;

  function resetGame(){
    score = 0; worldOffset = 0; obstacles = []; coins = []; spawnTimer = 0; coinTimer = 0; PLAYER.x = 120; PLAYER.y = VH-120; PLAYER.vx=0; PLAYER.vy=0; PLAYER.onGround=true; running = true; last = performance.now();
  }
  resetGame();

  // Helpers
  function rand(min,max){return Math.random()*(max-min)+min}

  function spawnObstacle(){
    const h = rand(30,120);
    obstacles.push({x:VW + rand(0,200), w:rand(28,60), h:h, y:VH - 90 - (h-30)});
  }
  function spawnCoin(){
    coins.push({x:VW + rand(0,400), y:VH-140 - rand(0,160), r:12, picked:false});
  }

  function update(dt){
    // movement
    if(keys.left) PLAYER.vx = -SPEED*0.6; else if(keys.right) PLAYER.vx = SPEED; else PLAYER.vx = 0;
    // jump
    if(keys.jump && PLAYER.onGround){ PLAYER.vy = -650; PLAYER.onGround = false; }

    PLAYER.vy += GRAV * dt;
    PLAYER.x += PLAYER.vx * dt;
    PLAYER.y += PLAYER.vy * dt;

    // floor
    const floorY = VH - 90 - PLAYER.h/2;
    if(PLAYER.y > floorY){ PLAYER.y = floorY; PLAYER.vy = 0; PLAYER.onGround = true; }

    // world runs left
    const move = SPEED * dt;
    worldOffset += move;
    // move obstacles & coins left
    for(let o of obstacles) o.x -= move;
    for(let c of coins) c.x -= move;

    // spawn
    spawnTimer -= dt;
    if(spawnTimer <= 0){ spawnObstacle(); spawnTimer = rand(0.6,1.4); }
    coinTimer -= dt;
    if(coinTimer <= 0){ spawnCoin(); coinTimer = rand(0.3,1.0); }

    // collisions with obstacles
    for(let o of obstacles){
      const px = PLAYER.x, py = PLAYER.y, pw = PLAYER.w, ph = PLAYER.h;
      const ox = o.x, oy = o.y, ow = o.w, oh = o.h;
      if(px + pw/2 > ox && px - pw/2 < ox + ow && py + ph/2 > oy && py - ph/2 < oy + oh){
        // hit -> game over
        running = false;
      }
    }

    // coins
    for(let c of coins){
      if(!c.picked){
        const dx = Math.abs(PLAYER.x - c.x);
        const dy = Math.abs(PLAYER.y - c.y);
        if(dx < (PLAYER.w/2 + c.r) && dy < (PLAYER.h/2 + c.r)){
          c.picked = true; score += 10; scoreEl.textContent = 'Score: ' + score;
          if(score > high){ high = score; localStorage.setItem(HKEY, high); highEl.textContent = 'High: ' + high; }
        }
      }
    }

    // remove offscreen
    obstacles = obstacles.filter(o => o.x + o.w > -50);
    coins = coins.filter(c => c.x + c.r > -50 && !c.picked);

    // score over time
    score += Math.floor(10 * dt);
    scoreEl.textContent = 'Score: ' + score;
  }

  function draw(){
    ctx.clearRect(0,0,VW,VH);
    // sky
    const g = ctx.createLinearGradient(0,0,0,VH);
    g.addColorStop(0,'#081027'); g.addColorStop(1,'#0b1220');
    ctx.fillStyle = g; ctx.fillRect(0,0,VW,VH);

    // ground
    ctx.fillStyle = '#102334'; ctx.fillRect(0,VH-90,VW,90);

    // player
    ctx.save();
    ctx.translate(PLAYER.x, PLAYER.y);
    ctx.fillStyle = '#ffd166';
    ctx.fillRect(-PLAYER.w/2, -PLAYER.h/2, PLAYER.w, PLAYER.h);
    ctx.restore();

    // obstacles
    ctx.fillStyle = '#d62839';
    for(let o of obstacles){ ctx.fillRect(o.x, o.y, o.w, o.h); }

    // coins
    ctx.fillStyle = '#ffde7d';
    for(let c of coins){ ctx.beginPath(); ctx.arc(c.x, c.y, c.r, 0, Math.PI*2); ctx.fill(); }

    // HUD
    ctx.fillStyle = '#e6f0ff'; ctx.font = '18px Arial'; ctx.fillText('Score: ' + score, 12, 28);
    ctx.fillText('High: ' + high, 12, 52);

    if(!running){
      ctx.fillStyle = 'rgba(0,0,0,0.6)'; ctx.fillRect(0,0,VW,VH);
      ctx.fillStyle = '#fff'; ctx.font = '36px Arial'; ctx.textAlign = 'center'; ctx.fillText('Game Over', VW/2, VH/2 - 12);
      ctx.font = '18px Arial'; ctx.fillText('Click Restart to play again', VW/2, VH/2 + 24);
      ctx.textAlign = 'start';
    }
  }

  function loop(t){
    if(!last) last = t; delta = (t - last)/1000; last = t;
    if(running) update(Math.min(delta,0.05));
    draw();
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  // Make player start at rest vertically in world coords
  PLAYER.y = VH - 90 - PLAYER.h/2;

})();
</script></body>
      </html>
